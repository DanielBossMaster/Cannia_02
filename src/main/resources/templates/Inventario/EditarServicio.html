<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Servicio</title>
    <link th:href="@{/css/VeterinarioCss/Inventario.css}" rel="stylesheet">

    <!-- Tu CSS general -->
    <link th:href="@{/css/VeterinarioCss/Inventario.css}" rel="stylesheet">

</head>

<body>

<header class="barra-superior" id="encabezado-principal">
</header>
<div class="modal" id="modalEditar">
<div class="card editar-card">

    <h2 style="text-align:center;">Editar Servicio</h2>

    <form th:action="@{/inventario/servicios/actualizar}" th:object="${servicio}" method="post">

        <!-- ID oculto -->
        <input type="hidden" th:field="*{id}">

        <div class="form-group">
            <label>Nombre del Servicio</label>
            <input type="text" th:field="*{nombre}" class="form-control" required>
        </div>

        <div class="form-group">
            <label>Descripción</label>
            <input type="text" th:field="*{descripcion}" class="form-control" required>
        </div>

        <div class="form-group">
            <label>Duración Estimada (minutos)</label>
            <input type="number" th:field="*{duracionEstimada}" class="form-control" min="1" required>
        </div>

        <div class="form-group">
            <label>Precio</label>
            <input type="number" th:field="*{precio}" class="form-control" min="0" step="0.01" required>
        </div>

        <!-- ESTADO CON PUNTO EDITABLE -->
        <div class="form-group toggle-container">
            <label>Estado</label>

            <!-- Punto visible -->
            <span id="estadoDot"
                  th:classappend="${servicio.estado} ? 'estado-dot on' : 'estado-dot off'">
            </span>

            <!-- Checkbox que sí se envía -->
            <input type="checkbox" id="estadoCheck" th:field="*{estado}">
        </div>

        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a th:href="@{/inventario/servicios}" class="btn btn-secondary">Cancelar</a>

    </form>
</div>
</div>

<script>
    const check = document.getElementById("estadoCheck");
    const dot = document.getElementById("estadoDot");

    check.addEventListener("change", () => {
        if (check.checked) {
            dot.classList.remove("off");
            dot.classList.add("on");
        } else {
            dot.classList.remove("on");
            dot.classList.add("off");
        }
    });
    document.body.classList.add("modal-open"); // al abrir modal
    document.body.classList.remove("modal-open"); // al cerrar modal

</script>

</body>
</html>
